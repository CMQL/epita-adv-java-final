{"ast":null,"code":"var _jsxFileName = \"E:\\\\JAVA\\\\Awork\\\\Movie System(F)\\\\ex01-07\\\\api models\\\\client\\\\src\\\\components\\\\ListMovies.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useRecoilState } from 'recoil';\nimport moviesState from '../atoms/moviesAtom'; //import DeleteMessages from './DeleteMessages';\n\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport dayjs from 'dayjs'; //import EditMessage from './EditMessage';\n\nimport homep from '../pages/Home';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ListMovies = () => {\n  _s();\n\n  const [movies, setMovies] = useRecoilState(moviesState);\n  dayjs.extend(relativeTime);\n\n  const getData = async () => {\n    const res = await axios.get(`${process.env.REACT_APP_API_URL}/movies`, {\n      withCredentials: true\n    }); //\n    //\n    //\n    //const seenres =await axios.get(`localhost:8080/seenmovies`,{\n    //    withCredentials:true\n    //})\n    //setMovies(res.data)\n    //\n    //\n\n    var adddate = new Date('2019-3-5');\n    var seentoday = [{\n      title: \"ABC\",\n      added: adddate,\n      external_id: \"123\"\n    }]; //res.data\n\n    setMovies(seentoday);\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  const handlerOnClick = async event => {\n    event.preventDefault();\n    console.log(form);\n    var formData = new FormData();\n\n    try {\n      const res = await axios.get(`localhost:8080/seenmovies/${Date.now.toDateString()}`, formData, {\n        withCredentials: true,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }); //let index = messages.indexOf(message)\n      //setMessages([...messages, [0]: res.data])\n\n      window.location.href = '/..'; //windows.location.href=users+'/'+userid\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pt-40 w-50 mx-auto\",\n    children: movies.map(movie => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mb-10 relative\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        onChange: handlerOnClick,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: movie.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"txt-small txt-right\",\n          children: [\"-- \", movie.added.toDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn bg-red-400 txt-white w-100\",\n          onClick: handlerOnClick,\n          children: \"Check who has seen the movie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, movie._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 12\n  }, this);\n};\n\n_s(ListMovies, \"MCHW7Ep+AlIZj9CwfsInziSkEtM=\", false, function () {\n  return [useRecoilState];\n});\n\n_c = ListMovies;\nexport default ListMovies;\n/*<div className='edit'>\r\n                    <EditMessage message={message}/>\r\n                </div>*/\n//                <DeleteMessages movie={movie}/>\n\n/**{movie.picture && <div className='card-image'>\r\n                <img src={`${movie.picture}`}alt='Message' />\r\n                </div>} */\n\nvar _c;\n\n$RefreshReg$(_c, \"ListMovies\");","map":{"version":3,"sources":["E:/JAVA/Awork/Movie System(F)/ex01-07/api models/client/src/components/ListMovies.js"],"names":["axios","React","useEffect","useState","useRecoilState","moviesState","relativeTime","dayjs","homep","ListMovies","movies","setMovies","extend","getData","res","get","process","env","REACT_APP_API_URL","withCredentials","adddate","Date","seentoday","title","added","external_id","handlerOnClick","event","preventDefault","console","log","form","formData","FormData","now","toDateString","headers","window","location","href","error","map","movie","_id"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRecoilState } from 'recoil';\r\nimport moviesState from '../atoms/moviesAtom';\r\n//import DeleteMessages from './DeleteMessages';\r\nimport relativeTime from 'dayjs/plugin/relativeTime'\r\nimport dayjs from 'dayjs'\r\n//import EditMessage from './EditMessage';\r\nimport homep from '../pages/Home';\r\n\r\nconst ListMovies = () => {\r\n    const [movies,setMovies]=useRecoilState(moviesState)\r\n    dayjs.extend(relativeTime)\r\n\r\n\r\n    const getData = async()=>{\r\n        const res =await axios.get(`${process.env.REACT_APP_API_URL}/movies`,{\r\n            withCredentials:true\r\n        })\r\n        //\r\n        //\r\n        \r\n        //\r\n        //const seenres =await axios.get(`localhost:8080/seenmovies`,{\r\n        //    withCredentials:true\r\n        //})\r\n        //setMovies(res.data)\r\n        //\r\n\r\n        //\r\n\r\n        var adddate=new Date('2019-3-5')\r\n        var seentoday=[\r\n            {title: \"ABC\",\r\n            added:adddate,\r\n            external_id:\"123\"}]\r\n        //res.data\r\n        setMovies(seentoday)\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getData()   \r\n    },[])\r\n\r\nconst handlerOnClick = async(event)=>{\r\n    event.preventDefault()\r\n\r\n    console.log(form)\r\n\r\n    var formData=new FormData()\r\n    try {\r\n        const res=await axios.get(`localhost:8080/seenmovies/${Date.now.toDateString()}`,formData,{\r\n            withCredentials:true,\r\n            headers:{\r\n                'Content-Type': 'multipart/form-data'\r\n            }})\r\n            //let index = messages.indexOf(message)\r\n            //setMessages([...messages, [0]: res.data])\r\n            window.location.href='/..'\r\n            //windows.location.href=users+'/'+userid\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}   \r\n\r\n\r\n  \r\n    return <div className='pt-40 w-50 mx-auto'>\r\n        {movies.map(movie=> <div key={movie._id} className='card mb-10 relative'>\r\n            \r\n                <div className='card-body' onChange={handlerOnClick}>\r\n                    <p>{movie.title}</p>\r\n                    <p className='txt-small txt-right'>-- {movie.added.toDateString()}</p>\r\n                    <button className='btn bg-red-400 txt-white w-100' onClick={handlerOnClick}>\r\n                        Check who has seen the movie\r\n                    </button>\r\n                    </div>\r\n                \r\n            </div>)}\r\n    </div>;\r\n};\r\n\r\nexport default ListMovies;\r\n\r\n/*<div className='edit'>\r\n                    <EditMessage message={message}/>\r\n                </div>*/ \r\n//                <DeleteMessages movie={movie}/>\r\n/**{movie.picture && <div className='card-image'>\r\n                <img src={`${movie.picture}`}alt='Message' />\r\n                </div>} */"]},"metadata":{},"sourceType":"module"}